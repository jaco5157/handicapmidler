$((function(){var e=$(".nbsp"),t=$(".SubmitButton_SearchPage"),n=$(".SearchField_SearchPage"),o=$(".SearchPage_TD"),r=!1;n.attr("placeholder","Søg på Handicapmidler.dk"),e.click((function(){var e=$(".SearchField_SearchPage").val();e=$.trim(e).length,$("body").width()>=800?0!==e?t.click():n.focus():!1===r?(n.val(""),o.addClass("SearchPage_TD-open"),n.focus(),r=!0):0!==e?t.click():(o.removeClass("SearchPage_TD-open"),n.focusout(),r=!1)})),e.mouseup((function(){return!1})),o.mouseup((function(){return!1})),$(document).mouseup((function(){!0===r&&(o.removeClass("SearchPage_TD-open"),r=!1)}))}));var currentWidth=$("body").width();if($(".Heading_Productmenu").click((function(){currentWidth<800&&$("#ProductMenu_List").slideToggle()})),$(window).resize((function(){if(currentWidth===$("body").width())return!1;$("body").width()<800?$("#ProductMenu_List").slideUp():$("#ProductMenu_List").slideDown(),currentWidth=$("body").width()})),document.querySelector(".webshop-productinfo")){var amount=document.getElementById("amount");if(document.querySelector(".selectors")&&(document.querySelector(".selectors").firstElementChild.className+=" active"),avGroups){var colorGroups=[];otherGroups=[],avGroups.forEach((e=>{groupIndex=avGroups.indexOf(e),e.Name.toLowerCase().includes("farve")?(colorGroupQuery=".VariantGroupPosition-"+(groupIndex+1)+" .RadioButton_Container_ProductInfo",otherGroups.push(document.querySelector(colorGroupQuery)),groupIndex?colorGroups.push(colorGroupQuery):createColorPicker([colorGroupQuery])):otherGroups.push(document.querySelector(".VariantGroupPosition-"+(groupIndex+1)+" select.OptionSelect_ProductInfo")),createColorPicker(colorGroups)})),colorGroups.length&&otherGroups.forEach((e=>{e.addEventListener("change",(()=>{setTimeout((()=>{createColorPicker(colorGroups)}),50)}))}))}var minus=document.createElement("button");minus.id="minus",minus.setAttribute("aria-label","Dekrementer mængde"),minus.setAttribute("type","button");var plus=document.createElement("button");if(plus.id="plus",plus.setAttribute("aria-label","Inkrementer mængde"),plus.setAttribute("type","button"),amount.parentNode.append(minus,amount,plus),document.querySelector(".buyWrapper input").setAttribute("alt","Læg i kurv"),document.querySelector(".inventory-container")){var inventoryItem=document.querySelector(".inventory-item-stock .inventory-item-header"),inventoryAmount=document.getElementById("inventory-amount");if(inventoryAmount.textContent>100&&(inventoryAmount.textContent="100+"),inventoryAmount.textContent<10&&inventoryAmount.textContent>0&&(inventoryItem.parentNode.className+=" inventory-item-low-stock"),inventoryAmount.textContent<=0){inventoryItem.parentNode.className+=" inventory-item-no-stock";var expectedDeliveryDate=document.querySelector("#delivery-time");"0001-01-01T00:00:00"==expectedDeliveryDate.textContent.trim()?expectedDeliveryDate.textContent="Kan ikke beregne leveringsdato":expectedDeliveryDate.textContent="På lager d. "+new Date(expectedDeliveryDate.textContent.trim()).toLocaleDateString("da-DK",{year:"numeric",month:"long",day:"numeric"})}}function variantClick(e){e.addEventListener("click",(function(e){window.location.hash="#prodInfo",document.querySelector(".Variants").style.border="1px solid #4583ed",document.querySelector(".Variants").style.borderRadius="7px",document.querySelector(".Variants").style.boxShadow="0 0 2px #4583ed",document.querySelector(".VariantGroupLabel").style.padding="5px"}))}document.querySelector(".Choose_Variant")&&variantClick(document.querySelector(".Choose_Variant")),document.querySelectorAll(".prodinfotable td").forEach((e=>{["vælg størrelse","vælg variant","vælg sædebredde"].some((t=>e.textContent.toLowerCase().includes(t)))&&variantClick(e)}));var tabs,tabContent,tabLinks,warningBox=document.getElementById("warning");minus.addEventListener("click",(function(e){amount.disabled?warningBox.style.display="block":amount.stepDown()})),plus.addEventListener("click",(function(e){amount.disabled?warningBox.style.display="block":amount.stepUp()})),tabs=document.querySelector(".tab"),tabContent=document.getElementsByClassName("tab-content");for(let e=(tabLinks=document.getElementsByClassName("tab-links")).length-1;e>=0;e--)tabContent[e].textContent.trim()||(tabLinks[e].remove(),tabContent[e].remove());tabLinks=document.getElementsByClassName("tab-links"),tabs.textContent.trim()?tabLinks[0].click():tabs.remove();var img=document.createElement("img");img.className="center",img.setAttribute("src","/images/logo/sprites.svg#pdf"),img.setAttribute("width","100"),img.setAttribute("height","100"),document.getElementsByClassName("documentation").forEach((function(e){e.firstChild&&(e.firstChild.setAttribute("title","Download dokumentation"),e.insertAdjacentElement("afterbegin",img.cloneNode(!0)))})),document.querySelector(".Related_Custom_DIV")&&document.querySelector(".Related_Custom_DIV").querySelectorAll("a").forEach((function(e){e.insertAdjacentElement("beforebegin",e.firstChild),e.remove()})),document.querySelector(".buyWrapper input").addEventListener("click",(async function(e){e.preventDefault();var t=amount.value;try{if(amount.disabled)return void(warningBox.style.display="block");var n="",o="";document.querySelectorAll(".addon").forEach((function(e){e.querySelector("input").checked&&(n+="|"+e.querySelector("span.addon-number").textContent,o+="|"+t)})),fetchurl="/shop/showbasket.html?AddMultiple=1&ProductID="+n+"&Amount="+o,await fetch(fetchurl).then((function(e){if(!e.ok)throw new Error("Der opstod en fejl, prøv venligst igen.");document.querySelector('form[name="myform"]').submit()}))}catch(e){warningBox.textContent=e,warningBox.style.display="block"}}))}function createColorPicker(e){e.forEach(((e,t)=>{select=document.querySelector(e),select.classList.add("color-picker","flex-container","flex-gap","centertext"),select.querySelectorAll(".advanced-variant-item-container").forEach(((e,t)=>{var n=e.querySelector("input");value=n.value.toLowerCase().split(" (")[0].replace(" ","-").split("/"),div=e.querySelector("div"),div.classList.add("variant-color"),div.setAttribute("style","background-color: var(--"+value[0]+")"),console.log(div),e.insertAdjacentElement("afterbegin",div),div.addEventListener("click",(()=>n.click())),value[1]&&(span=document.createElement("span"),span.setAttribute("style","background-color: var(--"+value[1]+")"),div.appendChild(span))}))}))}function openTab(e,t){var n,o,r;for(o=document.getElementsByClassName("tab-content"),r=document.getElementsByClassName("tab-links"),n=0;n<o.length;n++)o[n].className=o[n].className.replace(" active",""),r[n].className=r[n].className.replace(" active","");document.getElementById(t).className+=" active",e.currentTarget.className+=" active"}async function addToBasket(e,t){t.preventDefault(),productParam=e.querySelector(".listed-product-number").textContent,amountParam=e.querySelector(".prodvar input").value,fetchurl="/shop/showbasket.html?AddMultiple=1&ProductID="+productParam+"&Amount="+amountParam,button=document.createElement("button"),button.setAttribute("type","button"),button.setAttribute("class","basket-button"),button.setAttribute("onclick","location.href='https://www.handicapmidler.dk/shop/showbasket.html'"),button.textContent="Gå til kurven",await fetch(fetchurl).then((function(e){if(!e.ok)throw new Error("Der opstod en fejl, prøv venligst igen.");t.target.insertAdjacentElement("afterend",button),t.target.className+=" hidden"}))}function interactableProducts(){document.querySelectorAll(".productlist .product, .CustomersAlsoBought_Custom_DIV .product").forEach((function(e){e.addEventListener("click",(t=>{if("IMG"==t.target.nodeName||"SELECT"==t.target.nodeName||"BUTTON"==t.target.nodeName||"INPUT"==t.target.nodeName)return!1;e.querySelector("a").click()}));let t=e.querySelector(".listprodbuy").firstChild;(document.querySelector(".ProductList_Custom_DIV")&&"INPUT"==t.nodeName||document.querySelector(".CustomersAlsoBought_Custom_DIV")&&"IMG"==t.nodeName)&&(t.removeAttribute("onclick"),t.addEventListener("click",(t=>addToBasket(e,t))))})),document.getElementsByClassName("BuyButton_ProductList").forEach((function(e){"text"==e.type&&e.setAttribute("aria-label","Indtast antal produkter til køb"),"image"==e.type&&e.setAttribute("aria-label","Læg i kurv"),"IMG"==e.nodeName&&(e.setAttribute("alt","Vælg variant"),e.setAttribute("width","317px"),e.setAttribute("height","40px"),e.parentElement.setAttribute("title","Vælg variant"))}))}if(document.querySelector(".webshop-productlist, .CustomersAlsoBought_Custom_DIV, .webshop-frontpage")&&(interactableProducts(),document.querySelectorAll(".ProductListVariantSelector").forEach((e=>{e.firstChild.selected||e.firstChild.remove()}))),document.querySelector(".webshop-orderstep1")){document.querySelector(".halfColumn").insertAdjacentElement("afterend",document.querySelector(".OrderStep1_Next_TD").cloneNode(!0));var trWarning=document.createElement("tr"),tdWarning=document.createElement("td"),cvrButton=(warningBox=document.getElementById("warning"),document.getElementById("cvr-button"));trWarning.append(tdWarning),trWarning.append(warningBox),document.getElementById("Field2_4").insertAdjacentElement("afterend",trWarning),document.getElementById("cvrnr").insertAdjacentElement("afterend",cvrButton),trWarning.className="warning-field",tdWarning.className="LabelColumn",cvrButton.addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("cvrnr").value.trim(),n="https://cvrapi.dk/api?country=dk&vat="+t;try{if(""==t)return void(warningBox.style.display="block");var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.response);if(e.error)throw new Error("Der opstod en fejl, prøv venligst igen.");document.getElementById("company").value=e.name,document.getElementById("address").value=e.address,document.getElementById("zipcode").value=e.zipcode,document.getElementById("city").value=e.city,document.getElementById("phone").value=e.phone,document.getElementById("email").value=e.email,warningBox.style.display="none"}if(4==this.readyState&&200!=this.status)throw new Error("Der opstod en fejl, prøv venligst igen.")},o.open("GET",n,!0),o.send()}catch(e){warningBox.style.display="block"}}))}function addClickBox(){document.querySelectorAll(".checkout-payment-method, #ShippingMethod_54, #ShippingMethod_55, #ShippingMethod_56, #ShippingMethod_57, #GLS_ParselShops_55 tr").forEach((function(e){e.addEventListener("click",(function(t){e.querySelector("input").click(),t.stopPropagation()}))}))}window.onload=e=>{document.querySelector(".webshop-orderstep2")&&(document.querySelector(".BackgroundColor1_OrderStep2 tbody tr").insertAdjacentElement("afterend",document.querySelector(".OrderStep2_Methods_Next_TD").parentElement.cloneNode(!0)),addClickBox(),document.querySelector(".webshop-orderstep2").addEventListener("click",(function(e){addClickBox(),e.target.click(),e.stopPropagation()})))};
